<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="whatlastgenre : Improves genre-metadata of audio-files based on tags from various music-sites." />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>whatlastgenre</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/YetAnotherNerd/whatlastgenre">View on GitHub</a>

          <h1 id="project_title">whatlastgenre</h1>
          <h2 id="project_tagline">Improves genre-metadata of audio-files based on tags from various music-sites.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/YetAnotherNerd/whatlastgenre/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/YetAnotherNerd/whatlastgenre/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>whatlastgenre</h1>

<p>Improves genre metadata of audio files based on tags from various music-sites.</p>

<ul>
<li>Supported audio files: flac, ogg, mp3</li>
<li>Supported music-sites: What, Last.FM, MusicBrainz, Discogs</li>
<li>Feature Overview

<ul>
<li>Gets genre tags from various music sites and splits, merges, scores and
filters them.

<ul>
<li>Splitting by common separators, eg. Jazz+Funk -&gt; Jazz, Funk;
Rock/Pop -&gt; Rock, Pop; Jazz&amp;Funk+Rock -&gt; Jazz, Funk, Rock</li>
<li>Splitting by space for common prefixes,
like Alternative, Progressive, etc. (see tags.txt)</li>
<li>Merges similar tags in different writings,
eg. DnB, D&amp;B, Drum and Bass -&gt; Drum &amp; Bass</li>
<li>Scores them with different methods while taking personal
preferences into account</li>
<li>Filters them by personal preferences and preset or custom filters</li>
</ul>
</li>
<li>Optional: writes release type (Album, EP, Anthology, ...) (from What)</li>
<li>Optional: writes MusicBrainz IDs</li>
<li>Optional: caches already proceeded albums to speed things up next time</li>
<li>Makes use of MusicBrainz IDs when possible</li>
<li>Interactive mode, especially for release types and mbids
(it's not guessing wrong data)

<ul>
<li>Progressive fuzzy matching to reduce needed user input</li>
<li>eg. MusicBrainz: Tries to identify artists by looking at its albums </li>
</ul>
</li>
<li>Dry-mode for safe testing</li>
</ul>
</li>
</ul><h2>How it works</h2>

<p>It scans through folders for albums and receives genre tags for this releases
and their artists from different music-sites. The tags get scored and put
together, then the best scored tags will be saved as genre metadata in the
corresponding album tracks. If a tag is supplied from more then one source,
their individual scores will be summed up. Equal tags in different writings
will be merged together.</p>

<h3>Tags scoring with count (Last.FM, MusicBrainz, What partially)</h3>

<p>If counts are supplied for the tags, they will get scored by <code>count/topcount</code>,
where <code>topcount</code> is the highest count of all tags from a source. So the top
tag gets a score of 1.0, a tag having only half of the top tag's count gets a
score of 0.5 and so on. </p>

<h3>Tags scoring without count (Discogs, What partially)</h3>

<p>Tags supplied without a count will be scored <code>0.85^(n-1)</code>, where <code>n</code> is the
total number of tags supplied by this source. The more tags the lower the
score for each tag will be. So if only one tag is supplied, it will get a
score of 1.0, two tags will get a score of 0.85 each, three get 0.72 each
and so on...</p>

<h3>Score multiplier/modifier</h3>

<h4>Score multiplier for different sources</h4>

<p>Every source (What, Last.FM, MusicBrainz, Discogs) has its own score
multiplier, so sources that generally provide higher quality tags can be given
advantage over sources that often provide bad, inaccurate or personal tags.</p>

<h4>Split score multiplier</h4>

<p>There is a score multiplier for modifying the score of the base tag from a tag
that got split up, this enables you to decide whether to keep, prefer or ban
the base tag. For example, lets say we have 'Alternative Rock' with a score of
10. It will end up as Alternative with score 10, Rock with score 10, and
Alternative Rock with score 10 * .
So if you don't want to keep Alternative Rock, just set it to 0. </p>

<h4>Artist score multiplier</h4>

<p>There is an extra multiplier for tags gathered by searching for artists to
enable multiple albums from one artist getting more equal tags.</p>

<h4>Personal score modifiers</h4>

<p>One can set a list of tags that will get a multiplier bonus. Consider this as
some kind of "soft" white-/blacklist, where you can reduce the occurrence of
hated or inaccurate tags without fully banning them.</p>

<p>See Configuration for more details.
If you have any ideas on improving this scoring, please let me know :)</p>

<h2>Installation</h2>

<pre><code>$ python setup.py install
</code></pre>

<h3>Dependencies</h3>

<ul>
<li>musicbrainzngs</li>
<li>mutagen</li>
<li>requests</li>
</ul><h2>Configuration</h2>

<p>An empty configuration file will be created on the first run.</p>

<h3>Example configuration file</h3>

<pre><code>[whatcd]
username = whatusername
password = whatpassword
[genres]
blacklist = charts, composer, live, unknown
score_up = soundtrack
score_down = electronic, alternative, indie, other, other
filters = instruments, label, location, year
[scores]
what.cd = 1.66
last.fm = 0.66
mbrainz = 1.00
discogs = 1.00
artists = 1.33
splitup = 0.33
userset = 0.66
</code></pre>

<h3>Configuration options explained</h3>

<h4>genres section</h4>

<h5>score_up, score_down option</h5>

<p>This should be considered as "soft" white-/blacklist where you can in-/decrease
the occurrence of specific tags that you don't like or that are too inaccurate
for you without fully banning them like with the blacklist option. Tags listed
here will get a score bonus based on the configured multiplier.</p>

<h5>filters</h5>

<p>Use this to activate filtering of specific tag groups from genres:</p>

<ul>
<li>label: filters label names</li>
<li>location: filters country, city and nationality names</li>
<li>year: filters year tags, like 1980s</li>
<li>create your own filter lists by adding filter sections to the tags.txt file</li>
</ul><p>Consider custom filter lists as large blacklists.</p>

<h4>scores section</h4>

<p>Be careful when adjusting the score multipliers, setting them out of a
reasonable range may lead to unexpected results and bad tags. Don't set them
to negative values!</p>

<h5>what.cd, last.fm, mbrainz, discogs</h5>

<p>Score multipliers for the different sources. Default 1.0, increase if you
trust the tags from a source, lower if the source provides many inaccurate
or personal tags. Should be between 0.5 and 2.0</p>

<h5>artists</h5>

<p>Score multiplier for tags found by artist/albumartist searches.
This enables that multiple albums from one artist get more equal tags.</p>

<ul>
<li>=0 is NOT recommended</li>
<li>&lt;1 means prefer album tags</li>
<li>=1 means no difference between album and artist tags</li>
<li>&gt;1 means prefer artist tags</li>
</ul><h5>splitup</h5>

<p>Score multiplier for the "base"-tag of tags that got split up.</p>

<ul>
<li>=0 means forget about the "base" tags</li>
<li>&lt;1 means prefer splitted parts</li>
<li>=1 means handle them equally</li>
<li>&gt;1 is not recommended
better set it to 0.01 instead of 0 if you don't like the base tags</li>
</ul><h5>userset</h5>

<p><code>1+/-x</code> score multiplier for tags set in score_{up,down}</p>

<h2>Usage</h2>

<pre><code>usage: whatlastgenre.py [-h] [-v] [-n] [-i] [-r] [-m] [-c] [-l N]
                        [--no-whatcd] [--no-lastfm] [--no-mbrainz]
                        [--no-discogs] [--config CONFIG] [--cache CACHE]
                        path [path ...]

positional arguments:
  path                 folder(s) to scan for albums

optional arguments:
  -h, --help           show this help message and exit
  -v, --verbose        more detailed output (default: False)
  -n, --dry-run        don't save metadata (default: False)
  -i, --interactive    interactive mode (default: False)
  -r, --tag-release    tag release type (from What) (default: False)
  -m, --tag-mbids      tag musicbrainz ids (default: False)
  -c, --use-cache      cache processed albums (default: False)
  -l N, --tag-limit N  max. number of genre tags (default: 4)
  --no-whatcd          disable lookup on What (default: False)
  --no-lastfm          disable lookup on Last.FM (default: False)
  --no-mbrainz         disable lookup on MusicBrainz (default: False)
  --no-discogs         disable lookup on Discogs (default: False)
  --config CONFIG      location of the configuration file (default: ~/.whatlastgenre/config)
  --cache CACHE        location of the cache (default: ~/.whatlastgenre/cache)
</code></pre>

<p>If you seriously want to tag release-types (-r) or musicbrainz-ids (-m) you
should also enable interactive-mode (-i). Consider to save the mbids (-m) when
not using --no-mbrainz, you searched for them, why not save them? ;)
Think about using the cache feature (-c) if you have a large set of albums to
speed up things next time. Disabling music-sites is not recommended, the more
sources, the better tags.</p>

<h3>Examples</h3>

<p>Do a verbose dry-run on your albums in /home/user/music changing nothing:</p>

<pre><code>$ whatlastgenre.py -vn /home/user/music
</code></pre>

<p>Tag max. 3 genre tags for all albums in /home/user/music:</p>

<pre><code>$ whatlastgenre.py -cl 3 /home/user/music
</code></pre>

<p>To get the most of it for all albums in /media/music:</p>

<pre><code>$ whatlastgenre.py -cirml 5 /media/music
</code></pre>

<p>Just tag release-types and mbids (this is not intended) on /media/music:</p>

<pre><code>$ whatlastgenre.py -cirml 0 --no-lastfm --no-discogs /media/music
</code></pre>

<h3>Ended up with a tag that shouldn't be there?</h3>

<ul>
<li>If it's an impartial correct tag, just use score_down or blacklist to get
rid of it.</li>
<li>If it's a label or location tag that should have been filtered, please name
it to me so i can add it to the tags.txt file (do it yourself until i did it).</li>
<li>If the tag is personal, crappy or somehow else bad, just talk to me and i'll
try to find out what's happening and improve the scoring.</li>
</ul><h2>How to help</h2>

<p>Thanks for being interested in helping to improve it :)
Things you can tell me about:</p>

<ul>
<li>Tag that are similar but haven't been merged or naming inconsistencies,
e.g. 'Trip Hop' &lt;-&gt; 'Trip-Hop'</li>
<li>Tags that doesn't get split but should, or do get split but shouldn't.</li>
<li>Did i miss something in tags.txt?</li>
<li>If your unhappy with the tag results.</li>
<li>Any errors of course ;)</li>
</ul><p>I'm also happy for any other suggestions :)</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">whatlastgenre maintained by <a href="https://github.com/YetAnotherNerd">YetAnotherNerd</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
